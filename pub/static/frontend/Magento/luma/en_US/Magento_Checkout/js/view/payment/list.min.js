define(['underscore','ko','mageUtils','uiComponent','Magento_Checkout/js/model/payment/method-list','Magento_Checkout/js/model/payment/renderer-list','uiLayout','Magento_Checkout/js/model/checkout-data-resolver'],function(_,ko,utils,Component,paymentMethods,rendererList,layout,checkoutDataResolver){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/payment-methods/list',visible:paymentMethods().length>0},initialize:function(){this._super().initChildren();paymentMethods.subscribe(function(changes){checkoutDataResolver.resolvePaymentMethod();_.each(changes,function(change){if(change.status==='deleted'){this.removeRenderer(change.value.method);}},this);_.each(changes,function(change){if(change.status==='added'){this.createRenderer(change.value);}},this);},this,'arrayChange');return this;},initChildren:function(){var self=this;_.each(paymentMethods(),function(paymentMethodData){self.createRenderer(paymentMethodData);});return this;},createRenderer:function(paymentMethodData){var renderer=this.getRendererByType(paymentMethodData.method),rendererTemplate,rendererComponent,templateData;if(renderer){templateData={parentName:this.name,name:paymentMethodData.method};rendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',displayArea:'payment-method-items',component:renderer.component};rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{item:paymentMethodData});layout([rendererComponent]);}},getRendererByType:function(paymentMethodCode){var compatibleRenderer;_.find(rendererList(),function(renderer){if(renderer.type===paymentMethodCode){compatibleRenderer=renderer;}});return compatibleRenderer;},removeRenderer:function(paymentMethodCode){var items=this.getRegion('payment-method-items');_.find(items(),function(value){if(value.item.method===paymentMethodCode){value.disposeSubscriptions();this.removeChild(value);}},this);}});});