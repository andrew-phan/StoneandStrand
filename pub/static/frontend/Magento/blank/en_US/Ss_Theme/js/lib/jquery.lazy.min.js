/*!
 * jQuery Lazy - v1.6.7
 * http://jquery.eisbehr.de/lazy/
 *
 * Copyright 2012 - 2016, Daniel 'Eisbehr' Kern
 *
 * Dual licensed under the MIT and GPL-2.0 licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * $("img.lazy").lazy();
 */;(function($,window,document,undefined){"use strict";$.fn.Lazy=$.fn.lazy=function(settings){return new LazyPlugin(this,settings);};function _executeLazy(instance,configuration,items,events){var _awaitingAfterLoad=0,_actualWidth=-1,_actualHeight=-1,_isRetinaDisplay=false;function _initialize(){_isRetinaDisplay=window.devicePixelRatio>1;_prepareItems(items);if(configuration("delay")>=0)setTimeout(function(){_lazyLoadItems(true);},configuration("delay"));if(configuration("delay")<0||configuration("combined")){events.e=_throttle(configuration("throttle"),function(event){if(event.type==="resize")
_actualWidth=_actualHeight=-1;_lazyLoadItems(event.all);});events.a=function(additionalItems){_prepareItems(additionalItems);items.push.apply(items,additionalItems);};events.g=function(){return(items=$(items).filter(function(){return!$(this).data(configuration("loadedName"));}));};_lazyLoadItems();$(configuration("appendScroll")).on("scroll."+instance.name+" resize."+instance.name,events.e);}}
function _prepareItems(items){items=$(items).filter(function(){return!$(this).data(configuration("handledName"))&&($(this).attr(configuration("attribute"))||$(this).attr(configuration("loaderAttribute")));}).data("plugin_"+instance.name,instance);if(configuration("defaultImage")||configuration("placeholder"))
for(var i=0;i<items.length;i++){var element=$(items[i]),tag=items[i].tagName.toLowerCase(),propertyName="background-image";if(tag=="img"&&configuration("defaultImage")&&!element.attr("src"))
element.attr("src",configuration("defaultImage"));else if(tag!="img"&&configuration("placeholder")&&(!element.css(propertyName)||element.css(propertyName)=="none"))
element.css(propertyName,"url("+configuration("placeholder")+")");}}
function _lazyLoadItems(allItems){if(!items.length){if(configuration("autoDestroy"))
instance.destroy();return;}
var loadTriggered=false,imageBase=configuration("imageBase")?configuration("imageBase"):"";for(var i=0;i<items.length;i++)
(function(item){if(_isInLoadableArea(item)||allItems){var element=$(item),tag=item.tagName.toLowerCase(),attribute=element.attr(configuration("attribute")),customLoader;if(!element.data(configuration("handledName"))&&(!configuration("visibleOnly")||element.is(":visible"))&&(attribute&&((tag=="img"&&imageBase+attribute!=element.attr("src"))||(tag!="img"&&imageBase+attribute!=element.css("background-image")))||(customLoader=element.attr(configuration("loaderAttribute")))))
{loadTriggered=true;element.data(configuration("handledName"),true);_handleItem(element,tag,imageBase,customLoader);}}})(items[i]);if(loadTriggered)
items=$(items).filter(function(){return!$(this).data(configuration("handledName"));});}
function _handleItem(element,tag,imageBase,customLoader){++_awaitingAfterLoad;var errorCallback=function(){_triggerCallback("onError",element);_reduceAwaiting();};_triggerCallback("beforeLoad",element);if(customLoader){element.off("error").one("error",errorCallback);element.one("load",function(){if(configuration("removeAttribute"))
element.removeAttr(configuration("loaderAttribute"));element.data(configuration("loadedName"),true);_triggerCallback("afterLoad",element);_reduceAwaiting();});if(!_triggerCallback(customLoader,element,function(response){if(response)element.load();else element.error();}))element.error();}
else{var imageObj=$(new Image());imageObj.one("error",errorCallback);imageObj.one("load",function(){element.hide();if(tag=="img")element.attr("src",imageObj.attr("src"));else element.css("background-image","url('"+imageObj.attr("src")+"')");element[configuration("effect")](configuration("effectTime"));if(configuration("removeAttribute"))
element.removeAttr(configuration("attribute")+" "+configuration("retinaAttribute"));element.data(configuration("loadedName"),true);_triggerCallback("afterLoad",element);imageObj.remove();_reduceAwaiting();});imageObj.attr("src",imageBase+element.attr(configuration(_isRetinaDisplay&&element.attr(configuration("retinaAttribute"))?"retinaAttribute":"attribute")));if(imageObj.complete)imageObj.load();}}
function _isInLoadableArea(element){var elementBound=element.getBoundingClientRect(),direction=configuration("scrollDirection"),threshold=configuration("threshold"),vertical=((_getActualHeight()+threshold)>elementBound.top)&&(-threshold<elementBound.bottom),horizontal=((_getActualWidth()+threshold)>elementBound.left)&&(-threshold<elementBound.right);if(direction=="vertical")return vertical;else if(direction=="horizontal")return horizontal;return vertical&&horizontal;}
function _getActualWidth(){return _actualWidth>=0?_actualWidth:(_actualWidth=$(window).width());}
function _getActualHeight(){return _actualHeight>=0?_actualHeight:(_actualHeight=$(window).height());}
function _throttle(delay,callback){var timeout,lastExecute=0;return function(event,ignoreThrottle){var elapsed=+new Date()-lastExecute;function run(){lastExecute=+new Date();callback.call(instance,event);}
timeout&&clearTimeout(timeout);if(elapsed>delay||!configuration("enableThrottle")||ignoreThrottle)run();else timeout=setTimeout(run,delay-elapsed);};}
function _reduceAwaiting(){--_awaitingAfterLoad;if(!items.length&&!_awaitingAfterLoad)_triggerCallback("onFinishedAll");}
function _triggerCallback(callback,element,args){if((callback=configuration(callback))){callback.apply(instance,[].slice.call(arguments,1));return true;}
return false;}
(function(){if(configuration("bind")=="event")_initialize();else $(window).on("load."+instance.name,_initialize);})();}
function LazyPlugin(elements,settings){var _instance=this,_config=$.extend({},_instance.configuration,settings),_events={};_instance.config=function(entryName,value){if(value===undefined)
return _config[entryName];else
_config[entryName]=value;return _instance;};_instance.addItems=function(items){if(_events.a)
_events.a($.type(items)==="string"?$(items):items);return _instance;};_instance.getItems=function(){return _events.g?_events.g():{};};_instance.update=function(useThrottle){if(_events.e)
_events.e({},!useThrottle);return _instance;};_instance.loadAll=function(){if(_events.e)
_events.e({all:true},true);return _instance;};_instance.destroy=function(){$(_instance.config("appendScroll")).off("."+_instance.name,_events.e);$(window).off("."+_instance.name);_events={};return undefined;};_executeLazy(_instance,_instance.config,elements,_events);return _instance.config("chainable")?elements:_instance;}
$.extend(LazyPlugin.prototype,{name:"lazy",configuration:{chainable:true,autoDestroy:true,bind:"load",threshold:500,visibleOnly:false,appendScroll:window,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:false,attribute:"data-src",retinaAttribute:"data-retina",loaderAttribute:"data-loader",removeAttribute:true,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:true,throttle:250,beforeLoad:null,afterLoad:null,onError:null,onFinishedAll:null}});})(jQuery,window,document);